<div class="events-container">
  <div class="container-name">Prehľad podujatí</div>

  <!-- Vyhľadávanie -->
  <input class="search" type="text" placeholder="Nájsť podujatie.." [(ngModel)]="searchQuery" (ngModelChange)="filterEvents()">

  <!-- Filtre -->
  <div class="filters">
    <div class="filter-group">
      <span>Kategória:</span>
      <button *ngFor="let cat of categories"
              (click)="toggleCategoryFilter(cat)"
              [class.active]="selectedCategory === cat">
        {{ cat }}
      </button>
    </div>
    <div class="filter-group">
      <span>Miesto:</span>
      <button *ngFor="let place of places"
              (click)="togglePlaceFilter(place)"
              [class.active]="selectedPlace === place">
        {{ place }}
      </button>
    </div>
  </div>
</div>


<div class="main-container">
  <div class="events-list-container">
    <div class="events-list-list">
      <ul class="event-unordered-list">
        <li *ngFor="let e of filteredEvents" class="event-card" (click)="goToEvent(e.id!)">
          <!-- Event content (Header, Description, Details, Actions) -->
          <div class="event-card-header">
            <h3 class="event-title">{{ e.title }}</h3>
            <span class="event-date">
              {{ e.startDateTime | date: 'dd/MM/yyyy hh:mm' }} - {{ e.endDateTime | date: 'dd/MM/yyyy hh:mm' }}
            </span>
          </div>
          <p *ngIf="e.description" class="event-description">{{ e.description }}</p>
          <div class="event-details">
            <p *ngIf="e.price && e.price > 0" class="event-price">
              Cena: {{ e.price }} €
              <button class="buy-button">
                <svg class="buy-icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                  <path d="M0,394c0,23.5,19.1,42.7,42.7,42.7h426.7c23.5,0,42.7-19.1,42.7-42.7v-42.7H0V394z M469.3,95.3H42.7
      C19.1,95.3,0,114.5,0,138v170.7h512V138C512,114.5,492.9,95.3,469.3,95.3z" />
                </svg>
                Benefity s Galakartou
              </button>
            </p>
          </div>

          <div *ngIf="e.lat && e.lng" class="map-container">
            <google-map [height]="'200px'" [width]="'300px'" [zoom]="15" [center]="{ lat: e.lat, lng: e.lng }">
              <map-marker [position]="{ lat: e.lat, lng: e.lng }"></map-marker>
            </google-map>
          </div>
        </li>
      </ul>
    </div>
  </div>



  <!-- Map Container (Initially Empty) -->
  <div class="right-map-container">
    <google-map *ngIf="selectedEvent && selectedEvent.lat && selectedEvent.lng" [height]="'400px'" [width]="'600px'" [zoom]="15" [center]="{ lat: selectedEvent.lat, lng: selectedEvent.lng }">
      <map-marker [position]="{ lat: selectedEvent.lat, lng: selectedEvent.lng }"></map-marker>
    </google-map>
  </div>
</div>


